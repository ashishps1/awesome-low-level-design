This shows how the code will get the wrong is available state.

adding sync to method means no other thread can enter the block.

Here concurrency is defeated.
![alt text](image.png)